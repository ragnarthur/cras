{% extends "base.html" %}

{% block title %}Cadastro de Usuário - CRAS App{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4" style="font-size: 2rem; font-weight: bold; letter-spacing: 0.05rem;">Cadastro de Usuário</h2>

    <form action="{{ url_for('cadastro_usuario') }}" method="POST" class="needs-validation form-uppercase" novalidate>
        
        <!-- Box para informações pessoais do usuário -->
        <div class="card p-4 mb-4">
            <h5 class="card-title" style="font-size: 1.5rem; font-weight: bold; color: #0d6efd;">Informações Pessoais</h5>
            <div class="row">
                <!-- Nome -->
                <div class="col-md-6 mb-3">
                    <label for="nome" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Nome:</label>
                    <input type="text" class="form-control form-control-lg" id="nome" name="nome" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira o nome.</div>
                </div>

                <!-- Data de Nascimento -->
                <div class="col-md-6 mb-3">
                    <label for="data_nascimento" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Data de Nascimento:</label>
                    <input type="date" class="form-control form-control-lg" id="data_nascimento" name="data_nascimento" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira a data de nascimento.</div>
                </div>

                <!-- CPF -->
                <div class="col-md-6 mb-3">
                    <label for="cpf" class="form-label" style="font-size: 1.2rem; font-weight: bold;">CPF:</label>
                    <input type="text" class="form-control form-control-lg" id="cpf" name="cpf" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira o CPF.</div>
                </div>

                <!-- RG -->
                <div class="col-md-6 mb-3">
                    <label for="rg" class="form-label" style="font-size: 1.2rem; font-weight: bold;">RG:</label>
                    <input type="text" class="form-control form-control-lg" id="rg" name="rg" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira o RG.</div>
                </div>

                <!-- Telefone -->
                <div class="col-md-6 mb-3">
                    <label for="telefone" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Telefone:</label>
                    <input type="tel" class="form-control form-control-lg" id="telefone" name="telefone" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira um número de telefone válido no formato (11)98888-9999.</div>
                </div>
            </div>
        </div>

        <!-- Informações de Endereço -->
        <div class="card p-4 mb-4">
            <h5 class="card-title" style="font-size: 1.5rem; font-weight: bold; color: #0d6efd;">Endereço</h5>
            <div class="row">
                <!-- Rua -->
                <div class="col-md-6 mb-3">
                    <label for="rua" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Rua:</label>
                    <input type="text" class="form-control form-control-lg" id="rua" name="rua" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira a rua.</div>
                </div>

                <!-- Número -->
                <div class="col-md-3 mb-3">
                    <label for="numero" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Número:</label>
                    <input type="text" class="form-control form-control-lg" id="numero" name="numero" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira o número.</div>
                </div>

                <!-- Bairro -->
                <div class="col-md-6 mb-3">
                    <label for="bairro" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Bairro:</label>
                    <input type="text" class="form-control form-control-lg" id="bairro" name="bairro" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira o bairro.</div>
                </div>

                <!-- Cidade -->
                <div class="col-md-6 mb-3">
                    <label for="cidade" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Cidade:</label>
                    <input type="text" class="form-control form-control-lg" id="cidade" name="cidade" required>
                    <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira a cidade.</div>
                </div>
            </div>
        </div>

        <!-- Informações Familiares -->
        <div class="card p-4 mb-4">
            <h5 class="card-title" style="font-size: 1.5rem; font-weight: bold; color: #0d6efd;">Informações Familiares</h5>

            <!-- Possui filhos -->
            <div class="form-check form-switch mb-3">
                <input class="form-check-input form-check-lg" type="checkbox" id="filhos_switch" name="filhos" value="sim">
                <label class="form-check-label" for="filhos_switch" style="font-size: 1.2rem;">Possui filhos?</label>
            </div>

            <!-- Possui cônjuge -->
            <div class="form-check form-switch">
                <input class="form-check-input form-check-lg" type="checkbox" id="conjuge_switch" name="conjuge" value="sim">
                <label class="form-check-label" for="conjuge_switch" style="font-size: 1.2rem;">Possui cônjuge?</label>
            </div>
        </div>

        <!-- Possui Bolsa Família -->
        <div class="mb-4">
            <label class="form-label" style="font-size: 1.2rem; font-weight: bold;">Possui Bolsa Família?</label><br>
            <div class="form-check form-check-inline">
                <input type="radio" class="form-check-input" id="bolsa_sim" name="bolsa_familia" value="sim" checked>
                <label class="form-check-label" for="bolsa_sim" style="font-size: 1.2rem;">Sim</label>
            </div>
            <div class="form-check form-check-inline">
                <input type="radio" class="form-check-input" id="bolsa_nao" name="bolsa_familia" value="nao">
                <label class="form-check-label" for="bolsa_nao" style="font-size: 1.2rem;">Não</label>
            </div>
        </div>

        <!-- Última data de retirada da cesta básica -->
        <div class="mb-4">
            <label for="data_cesta" class="form-label" style="font-size: 1.2rem; font-weight: bold;">Última data de retirada da cesta básica:</label>
            <input type="date" class="form-control form-control-lg" id="data_cesta" name="data_cesta" required>
            <div class="invalid-feedback" style="font-size: 1.1rem;">Por favor, insira a data de retirada da cesta básica.</div>
        </div>

        <button type="submit" class="btn btn-primary btn-lg w-100">Cadastrar</button>
    </form>
</div>

<script>
    // Máscara para CPF: 111.222.333-44
    function aplicarMascaraCPF(cpf) {
        cpf = cpf.replace(/\D/g, '');
        cpf = cpf.substring(0, 11); // Limita a 11 caracteres numéricos
        cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
        cpf = cpf.replace(/(\d{3})(\d)/, '$1.$2');
        cpf = cpf.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
        return cpf;
    }

    // Máscara para RG: 11.222.333
    function aplicarMascaraRG(rg) {
        rg = rg.replace(/\D/g, '');
        rg = rg.substring(0, 8); // Limita a 8 caracteres numéricos
        rg = rg.replace(/(\d{2})(\d)/, '$1.$2');
        rg = rg.replace(/(\d{3})(\d)/, '$1.$2');
        return rg;
    }

    document.getElementById('cpf').addEventListener('input', function() {
        this.value = aplicarMascaraCPF(this.value);
    });

    document.getElementById('rg').addEventListener('input', function() {
        this.value = aplicarMascaraRG(this.value);
    });
</script>

{% endblock %}
